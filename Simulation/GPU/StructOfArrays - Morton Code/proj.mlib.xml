<?xml version="1.0" ?>
<materialLib name="particleLib">

	<textures>
		<texture name="sphereNormal" filename="textures/sphereNormal.png" mipmap="true"/>
		<cubeMap name="CMHouse" 

			filePosX="TextureCubeMaps/Yokohama3/posx.jpg"
			fileNegX="TextureCubeMaps/Yokohama3/negx.jpg"
			filePosY="TextureCubeMaps/Yokohama3/negy.jpg"
			fileNegY="TextureCubeMaps/Yokohama3/posy.jpg"
			filePosZ="TextureCubeMaps/Yokohama3/posz.jpg"
			fileNegZ="TextureCubeMaps/Yokohama3/negz.jpg"	
		/>
	</textures>
    
	<renderTargets>
		<renderTarget name ="Background">
			<SIZE width="1920" height="1080" />
			<!--CLEAR_VALUES r="0.8" g="1.0" b="0.7" /-->
			<colors>
				<color name="backgroundTex" internalFormat="RGBA32F" />
			</colors>
			<depth name="texRenderZ" internalFormat="DEPTH_COMPONENT32F" />
		</renderTarget>
		<renderTarget name ="NormalMap">			
			<SIZE width="1920" height="1080" />
			<!--CLEAR_VALUES r="0.8" g="1.0" b="0.7" /-->
			<colors>
				<color name="normalMapSphere" internalFormat="RGBA32F" />
			</colors>
			<depth name="texRender" internalFormat="DEPTH_COMPONENT32F" />
		</renderTarget>
		<renderTarget name ="SpherePos">
			<SIZE width="1920" height="1080" />
			<!--CLEAR_VALUES r="0.8" g="1.0" b="0.7" /-->
			<colors>
				<color name="spherePosTex" internalFormat="RGBA32F" />
			</colors>
			<depth name="texRender" internalFormat="DEPTH_COMPONENT32F" />
		</renderTarget>
	    <renderTarget name ="Render">
			<SIZE width="1920" height="1080" />
			<!--CLEAR_VALUES r="0.8" g="1.0" b="0.7" /-->
			<colors>
				<color name="fluidColor" internalFormat="RGBA32F" />
			</colors>
			<depth name="texRenderZ" internalFormat="DEPTH_COMPONENT32F" />
		</renderTarget>
		
    </renderTargets>

	<shaders>
            <shader name="particles"
                vs="shaders/billboard.vert"
                gs="shaders/billboard.geom"
				ps="shaders/billboard.frag"
            />
			<shader name="frontface"
                vs="shaders/billboard.vert"
                gs="shaders/billboard.geom"
				ps="shaders/particlePos.frag"
            />
			<shader name="normalfront"
                vs="shaders/billboard.vert"
                gs="shaders/billboard.geom"
				ps="shaders/normalmap.frag"
            />
            <shader name="init" 	 			
					cs="shaders/init.comp"
			/>
			
			<shader name="RadixSort" 	 			
					cs="shaders/RadixSort.comp"
			/>
			<shader name="ComputeHistogram" 	 			
					cs="shaders/computeHistogram.comp"
			/>
			<shader name="LocalPrefixSum" 	 			
					cs="shaders/localPrefixSum.comp"
			/>
			<shader name="GlobalPrefixSum" 	 			
					cs="shaders/globalPrefixSum.comp"
			/>
			<shader name="GlobalPrefixSumBack" 	 			
					cs="shaders/globalPrefixSumBack.comp"
			/>
			<shader name="CopyData" 	 			
					cs="shaders/copyData.comp"
			/>

			<shader name="UpdateIndex" 	 			
					cs="shaders/updateIndex.comp"
			/>

			<shader name="UpdateControlVariables" 	 			
					cs="shaders/updateControlVariables.comp"
			/>
			
			<shader name="ComputeStartEnd" 	 			
					cs="shaders/computeStartEnd.comp"
			/>
			<shader name="ClearStartEnd" 	 			
					cs="shaders/clearStartEnd.comp"
			/>
			<shader name="force" 	 			
					cs="shaders/force.comp"
			/> 	
            <shader name="integrate" 			
					cs="shaders/integrate.comp"
			/>
			<shader name="UpdateHash" 			
					cs="shaders/updateHash.comp"
			/>
			<shader name="ComputeOffsets" 			
					cs="shaders/computeOffsets.comp"
			/>
			<shader name="ComputeTemps" 			
					cs="shaders/computeTemps.comp"
			/>
			

			<shader name="ZeroBuffers" 			
					cs="shaders/zeroBuffers.comp"
			/>
			 	
            <shader name="density_pressure" 	
					cs="shaders/density_pressure.comp"
			/> 	
			<shader name = "FinalStep"
				vs = "shaders/quad.vert"
				ps = "shaders/color.frag" />

            <shader name = "shader_skybox"
                vs = "shaders/skybox.vert"
                ps = "shaders/skybox.frag" />
	</shaders>
	<states>
		<state name="blendpar">
			<ORDER value="2" />
			<DEPTH_MASK value="FALSE"/>
			<BLEND value="TRUE" />
			<BLEND_SRC value="SRC_ALPHA" />
			<BLEND_DST value="ONE_MINUS_SRC_ALPHA" />
		</state>
		<state name="blendAlt_">
			<ORDER value="2" />
			<DEPTH_MASK value="FALSE"/>
			<BLEND value="TRUE" />
			<BLEND_SRC value="SRC_ALPHA" />
			<BLEND_DST value="ONE_MINUS_SRC_ALPHA" />
		</state>
		<state name="blendAlt">
			
			<DEPTH_FUNC value="LEQUAL"/>
			<DEPTH_MASK value="TRUE"/>
		</state>
		<state name="cull">
			<DEPTH_FUNC value="LEQUAL" />
			<CULL_TYPE value="FRONT" />
		</state>
	</states>

	<buffers>
		<buffer name="Position">
			<DIM x="NUMBER_OF_PARTICLES" y="1" z="1" />
			<structure>
				<field value="VEC4" />
			</structure>
			<!--file name="positionFile.txt"/-->
			<CLEAR value="NEVER" />
		</buffer>
		<buffer name="Velocity">
			<DIM x="NUMBER_OF_PARTICLES" y="1" z="1" />
			<structure>
				<field value="VEC4" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>
		<buffer name="Force">
			<DIM x="NUMBER_OF_PARTICLES" y="1" z="1" />
			<structure>
				<field value="VEC4" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>
		<buffer name="Density">
			<DIM x="NUMBER_OF_PARTICLES" y="1" z="1" />
			<structure>
				<field value="FLOAT" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>
		<buffer name="Pressure">
			<DIM x="NUMBER_OF_PARTICLES" y="1" z="1" />
			<structure>
				<field value="FLOAT" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>

		<buffer name="Acceleration">
			<DIM x="NUMBER_OF_PARTICLES" y="1" z="1" />
			<structure>
				<field value="VEC4" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>

		<buffer name="Gravity">
			<DIM x="NUMBER_OF_PARTICLES" y="1" z="1" />
			<structure>
				<field value="VEC4" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>

		<buffer name="SurfaceNormal">
			<DIM x="NUMBER_OF_PARTICLES" y="1" z="1" />
			<structure>
				<field value="VEC4" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>

		<buffer name="SurfaceTension">
			<DIM x="NUMBER_OF_PARTICLES" y="1" z="1" />
			<structure>
				<field value="VEC4" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>

		<buffer name="Viscosity">
			<DIM x="NUMBER_OF_PARTICLES" y="1" z="1" />
			<structure>
				<field value="VEC4" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>
		<buffer name="Index">
			<DIM x="NUMBER_OF_PARTICLES" y="1" z="1" />
			<structure>
				<field value="UINT" />
			</structure>
			<!--file name ="hashSizeFile.txt" /-->
			<CLEAR value="NEVER" />
		</buffer>

		<buffer name="TempIndex">
			<DIM x="NUMBER_OF_PARTICLES" y="1" z="1" />
			<structure>
				<field value="UINT" />
			</structure>
			<!--file name ="hashSizeFile.txt" /-->
			<CLEAR value="NEVER" />
		</buffer>
		
		<buffer name="TempPosition">
			<DIM x="NUMBER_OF_PARTICLES" y="1" z="1" />
			<structure>
				<field value="VEC4" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>
		<buffer name="TempVelocity">
			<DIM x="NUMBER_OF_PARTICLES" y="1" z="1" />
			<structure>
				<field value="VEC4" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>

		<buffer name="CountRadix">
			<DIM x="10" y="1" z="1" />
			<structure>
				<field value="UINT" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>

		<buffer name="Exp">
			<DIM x="1" y="1" z="1" />
			<structure>
				<field value="UINT" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>
		<buffer name="UseTemp">
			<DIM x="1" y="1" z="1" />
			<structure>
				<field value="UINT" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>
		

		
		<buffer name="Debug">
			<DIM x="NUMBER_OF_PARTICLES" y="1" z="1" />
			<structure>
				<field value="VEC4" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>

		<buffer name="Adj">
			<!-- NUMBER_OF_PARTICLES*100 216000 -->
			<DIM x="216000" y="500" z="1" />
			<structure>
				<field value="INT" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>
		<buffer name="Histogram">
			<!-- 216 porque vamos ter 216 threads -->
			<DIM x="10" y="2160" z="1" />
			<structure>
				<field value="INT" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>
		<buffer name="PrefixSum">
			<!-- 216 porque vamos ter 216 threads -->
			<DIM x="10" y="2160" z="1" />
			<structure>
				<field value="INT" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>

		<buffer name="CellStart">
			<!-- Vai indicar o index (no array das particulas) onde uma celula comeÃ§a -->
			<DIM x="2000000" y="1" z="1" />
			<structure>
				<field value="INT" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>

		<buffer name="CellEnd">
			<!-- Vai indicar o index (no array das particulas) onde uma celula Acaba -->
			<DIM x="2000000" y="1" z="1" />
			<structure>
				<field value="INT" />
			</structure>
			<CLEAR value="NEVER" />
		</buffer>

	</buffers>
	
	<materials>		
		<material name="FinalStep">
			<shader name="FinalStep">
				<values>
					<valueof uniform="backgroundTex"		type="TEXTURE_BINDING" 	context="CURRENT" 		component="UNIT" id="2" />
					<valueof uniform="normalMapSphere"		type="TEXTURE_BINDING" 	context="CURRENT" 		component="UNIT" id="1" />
					<valueof uniform="fluidColor"			type="TEXTURE_BINDING" 	context="CURRENT" 		component="UNIT" id="0" />
					<valueof uniform="lightDir"				type="LIGHT" 			context="Sun" 			component="DIRECTION" />
					<valueof uniform="texUnit"				type="TEXTURE_BINDING" 	context="CURRENT" 		component="UNIT" id="4" />
					<valueof uniform="spherePosTex"			type="TEXTURE_BINDING" 	context="CURRENT" 		component="UNIT" id="3" />
					<valueof uniform="eta" 	    			type="RENDERER" 		context="CURRENT" 		component="ETA" />
					<valueof uniform="Particle_Color" 		type="RENDERER" 		context="CURRENT" 		component="Particle_Color" />
					<valueof uniform="Alpha_Threshold" 		type="RENDERER" 		context="CURRENT" 		component="Alpha_Threshold" />
					<valueof uniform="Blur" 				type="RENDERER" 		context="CURRENT" 		component="Blur" />
					<valueof uniform="WhiteParticles" 		type="RENDERER" 		context="CURRENT" 		component="WhiteParticles" />
					<valueof uniform="Blur_Size" 			type="RENDERER" 		context="CURRENT" 		component="Blur_Size" />
					<valueof uniform="Blur_Quality" 		type="RENDERER" 		context="CURRENT" 		component="Blur_Quality" />
				</values>
			</shader>
			<textures>
				<texture name="fluidColor" UNIT="0"/>
				<texture name="backgroundTex" UNIT="2"/>
				<texture name="spherePosTex" UNIT="3"/>
				<texture name="normalMapSphere" UNIT="1"/>
				<texture name="CMHouse" UNIT="4"/>
			</textures>
		</material>

		<material name="Thickness">
			<shader name="particles">
				<values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="m_nright"			type="CAMERA" 			context="CURRENT" 		component="NORMALIZED_RIGHT" />
					<valueof uniform="m_nup" 			type="CAMERA" 			context="CURRENT" 		component="NORMALIZED_UP" />
					<valueof uniform="m_campos" 		type="CAMERA" 			context="CURRENT" 		component="POSITION" />
					<valueof uniform="m_pv" 			type="RENDERER" 		context="CURRENT" 		component="PROJECTION_VIEW" />
					<valueof uniform="lightDir"			type="LIGHT" 			context="Sun" 			component="DIRECTION" />
					<valueof uniform="normalMatrix" 	type="RENDERER" 		context="CURRENT" 		component="NORMAL" />
					<valueof uniform="sphereNormal"		type="TEXTURE_BINDING" 	context="CURRENT" 		component="UNIT" id="0" />
					<valueof uniform="Particle_alpha" 		type="RENDERER" 		context="CURRENT" 		component="Particle_alpha" />
					<valueof uniform="Particle_Size" 		type="RENDERER" 		context="CURRENT" 		component="Particle_Size" />
				</values>
			</shader>
			<textures>
				<texture name="sphereNormal" UNIT="0"/>
			</textures>
			<state name="blendpar"/>
			<buffers>
				<buffer name="Position" >
					<TYPE value="SHADER_STORAGE" />
					<BINDING_POINT value="1" />
				</buffer>
			</buffers>
		</material>
		
		<material name="FrontFaceDepth">
			<shader name="frontface">
				<values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="m_nright"			type="CAMERA" 			context="CURRENT" 		component="NORMALIZED_RIGHT" />
					<valueof uniform="m_nup" 			type="CAMERA" 			context="CURRENT" 		component="NORMALIZED_UP" />
					<valueof uniform="m_campos" 		type="CAMERA" 			context="CURRENT" 		component="POSITION" />
					<valueof uniform="m_pv" 			type="RENDERER" 		context="CURRENT" 		component="PROJECTION_VIEW" />
					<valueof uniform="lightDir"			type="LIGHT" 			context="Sun" 			component="DIRECTION" />
					<valueof uniform="normalMatrix" 	type="RENDERER" 		context="CURRENT" 		component="NORMAL" />
					<valueof uniform="sphereNormal"		type="TEXTURE_BINDING" 	context="CURRENT" 		component="UNIT" id="0" />
					<valueof uniform="Particle_Size" 		type="RENDERER" 		context="CURRENT" 		component="Particle_Size" />

				</values>
			</shader>
			<state name="blendAlt"/>

			<textures>
				<texture name="sphereNormal" UNIT="0"/>
			</textures>
			<buffers>
				<buffer name="Position" >
					<TYPE value="SHADER_STORAGE" />
					<BINDING_POINT value="1" />
				</buffer>
			</buffers>
		</material>
		<material name="NormalMapFront">
			<shader name="normalfront">
				<values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="m_nright"			type="CAMERA" 			context="CURRENT" 		component="NORMALIZED_RIGHT" />
					<valueof uniform="m_nup" 			type="CAMERA" 			context="CURRENT" 		component="NORMALIZED_UP" />
					<valueof uniform="m_campos" 		type="CAMERA" 			context="CURRENT" 		component="POSITION" />
					<valueof uniform="m_pv" 			type="RENDERER" 		context="CURRENT" 		component="PROJECTION_VIEW" />
					<valueof uniform="lightDir"			type="LIGHT" 			context="Sun" 			component="DIRECTION" />
					<valueof uniform="normalMatrix" 	type="RENDERER" 		context="CURRENT" 		component="NORMAL" />
					<valueof uniform="sphereNormal"		type="TEXTURE_BINDING" 	context="CURRENT" 		component="UNIT" id="0" />
					<valueof uniform="Particle_alpha" 	type="RENDERER" 		context="CURRENT" 		component="Particle_alpha" />
					<valueof uniform="Particle_Size" 		type="RENDERER" 		context="CURRENT" 		component="Particle_Size" />

				</values>
			</shader>
			<textures>
				<texture name="sphereNormal" UNIT="0"/>
			</textures>
			<state name="blendAlt"/>
			<buffers>
				<buffer name="Position" >
					<TYPE value="SHADER_STORAGE" />
					<BINDING_POINT value="1" />
				</buffer>
			</buffers>
		</material>

		<material name="mat_skybox">
			<shader name="shader_skybox">
				<values>
					<valueof uniform="m_proj" 
							 type="RENDERER" context="CURRENT" component="PROJECTION" />
					<valueof uniform="m_view" 
							 type="RENDERER" context="CURRENT" component="VIEW" />
					<valueof uniform="view_size"
							 type="VIEWPORT" context="CURRENT" component="SIZE" />
					<valueof uniform="light_dir" 
							 type="LIGHT" context="Sun" component="DIRECTION" />
					<valueof uniform="CMHouse"				
							 type="TEXTURE_BINDING" 	context="CURRENT" 	component="UNIT" id="0" />

				</values>
			</shader>	
			<state name="cull"/>
			<textures>
                <texture name="CMHouse" UNIT = 0 />
            </textures>
		</material>

		<material name="Init" 			>
		    <shader name="init" 		>
		        <values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
					<valueof uniform="MASS" 			type="RENDERER" 		context="CURRENT" 		component="MASS" />
					<valueof uniform="RESTDENSITY" 		type="RENDERER" 		context="CURRENT" 		component="RESTDENSITY" />
					<valueof uniform="HASHSIZE" 		type="RENDERER" 		context="CURRENT" 		component="HASHSIZE" />
					<valueof uniform="PONTOS_LADO" 		type="RENDERER" 		context="CURRENT" 		component="PONTOS_LADO" />
					<valueof uniform="H" 		type="RENDERER" 		context="CURRENT" 		component="H" />
				</values>
		    </shader>
			<buffers>
					<buffer name="Position" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="0" />
					</buffer>
					
					<buffer name="TempPosition">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="1" />
					</buffer>

					<buffer name="Index">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="2" />
					</buffer>

					<buffer name="Exp">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="3" />
					</buffer>
					<buffer name="UseTemp">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="4" />
					</buffer>
					<buffer name="TempIndex">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="5" />
					</buffer>
					
								
		        </buffers>
		</material>
		<material name="UpdateIndex" 			>
		    <shader name="UpdateIndex" 		>
		        <values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
					<valueof uniform="MASS" 			type="RENDERER" 		context="CURRENT" 		component="MASS" />
					<valueof uniform="RESTDENSITY" 		type="RENDERER" 		context="CURRENT" 		component="RESTDENSITY" />
					<valueof uniform="HASHSIZE" 		type="RENDERER" 		context="CURRENT" 		component="HASHSIZE" />
					<valueof uniform="PONTOS_LADO" 		type="RENDERER" 		context="CURRENT" 		component="PONTOS_LADO" />
					<valueof uniform="H" 		type="RENDERER" 		context="CURRENT" 		component="H" />
					<valueof uniform="Pause" 		type="RENDERER" 		context="CURRENT" 		component="Pause" />

				</values>
		    </shader>
			<buffers>
					<buffer name="Position" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="0" />
					</buffer>
					
					<buffer name="TempPosition">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="1" />
					</buffer>

					<buffer name="Index">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="2" />
					</buffer>

					<buffer name="Exp">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="3" />
					</buffer>
					<buffer name="UseTemp">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="4" />
					</buffer>
					
								
		        </buffers>
		</material>
		<material name="force" 	 			>
		    <shader name="force" 	 		>
		        <values>		
					<valueof uniform="Particle_Radius" type="RENDERER" context="CURRENT" component="Particle_Radius"/>
					<valueof uniform="Particle_Resting_Density" type="RENDERER" context="CURRENT" component="Particle_Resting_Density"/>
					<valueof uniform="Particle_Mass" type="RENDERER" context="CURRENT" component="Particle_Mass"/>
					<valueof uniform="Particle_Stiffness" type="RENDERER" context="CURRENT" component="Particle_Stiffness"/>
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
					<valueof uniform="External_Force" 			type="RENDERER"			context="CURRENT" 		component="External_Force" />
					<valueof uniform="VISCOSITY" 		type="RENDERER" 		context="CURRENT" 		component="VISCOSITY" />
					<valueof uniform="HASHSIZE" 		type="RENDERER" 		context="CURRENT" 		component="HASHSIZE" />
					<valueof uniform="Pause" 			type="RENDERER" 		context="CURRENT" 		component="Pause" />
					<valueof uniform="H" 		type="RENDERER" 		context="CURRENT" 		component="H" />
					<valueof uniform="MASS" 		type="RENDERER" 		context="CURRENT" 		component="MASS" />
					<valueof uniform="GRAVITY" 		type="RENDERER" 		context="CURRENT" 		component="GRAVITY" />
					<valueof uniform="THRESHOLD" 		type="RENDERER" 		context="CURRENT" 		component="THRESHOLD" />
					<valueof uniform="SURFACETENSION" 		type="RENDERER" 		context="CURRENT" 		component="SURFACETENSION" />
					
					
				</values>
		    </shader>
			<buffers>
					<buffer name="Position" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="0" />
					</buffer>
					<buffer name="Velocity" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="1" />
					</buffer>
					<buffer name="Force" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="2" />
					</buffer>	
					<buffer name="Density" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="3" />
					</buffer>	
					<buffer name="Pressure" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="4" />
					</buffer>
					<!-- Os meus buffers -->
					
					<buffer name="Gravity" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="5" />
					</buffer>
					<buffer name="SurfaceNormal" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="6" />
					</buffer>
					<buffer name="SurfaceTension" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="7" />
					</buffer>
					<buffer name="Viscosity" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="8" />
					</buffer>
					
					
					
					
					<buffer name="Debug">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="9" />
					</buffer>
					<buffer name="Adj">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="10" />
					</buffer>					
		        </buffers>
		</material> 	
		<material name="integrate" 			>
		    <shader name="integrate" 		>
		        <values>
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
					<valueof uniform="time" type="RENDERER" 		context="CURRENT" 		component="TIMER" />
					<valueof uniform="Pause" 			type="RENDERER" 		context="CURRENT" 		component="Pause" />
					<valueof uniform="TIMESTEP" 		type="RENDERER" 		context="CURRENT" 		component="TIMESTEP" />
					<valueof uniform="XMAX" 		type="RENDERER" 		context="CURRENT" 		component="XMAX" />
					<valueof uniform="YMAX" 		type="RENDERER" 		context="CURRENT" 		component="YMAX" />
					<valueof uniform="ZMAX" 		type="RENDERER" 		context="CURRENT" 		component="ZMAX" />
					<valueof uniform="XMIN" 		type="RENDERER" 		context="CURRENT" 		component="XMIN" />
					<valueof uniform="YMIN" 		type="RENDERER" 		context="CURRENT" 		component="YMIN" />
					<valueof uniform="ZMIN" 		type="RENDERER" 		context="CURRENT" 		component="ZMIN" />
					<valueof uniform="DECLIVE" 		type="RENDERER" 		context="CURRENT" 		component="DECLIVE" />
					<valueof uniform="RESTITUTION" 		type="RENDERER" 		context="CURRENT" 		component="RESTITUTION" />
				</values>
		    </shader>
			<buffers>
				<buffer name="Position" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="0" />
					</buffer>
					<buffer name="Velocity" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="1" />
					</buffer>
					<buffer name="Force" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="2" />
					</buffer>	
					<buffer name="Density" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="3" />
					</buffer>	
					
					<!-- Os meus buffers -->
					<buffer name="Acceleration" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="4" />
					</buffer>
					<buffer name="Gravity" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="5" />
					</buffer>
					
					<buffer name="SurfaceTension" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="6" />
					</buffer>
					<buffer name="Viscosity" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="7" />
					</buffer>
					
			</buffers>
		</material> 	
		<material name="density_pressure" 	>
		    <shader name="density_pressure" >
		        <values>
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />		        
					<valueof uniform="Pause" 			type="RENDERER" 		context="CURRENT" 		component="Pause" />
					<valueof uniform="HASHSIZE" 		type="RENDERER" 		context="CURRENT" 		component="HASHSIZE" />
					<valueof uniform="RESTDENSITY" 		type="RENDERER" 		context="CURRENT" 		component="RESTDENSITY" />
					<valueof uniform="H" 		type="RENDERER" 		context="CURRENT" 		component="H" />
					<valueof uniform="MASS" 		type="RENDERER" 		context="CURRENT" 		component="MASS" />
					<valueof uniform="STIFF" 		type="RENDERER" 		context="CURRENT" 		component="STIFF" />
				</values>
		    </shader>
			<buffers>
				<buffer name="Position" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="0" />
					</buffer>
						
					<buffer name="Density" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="1" />
					</buffer>	
					<buffer name="Pressure" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="2" />
					</buffer>
					
					
					<buffer name="Debug">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="3" />
					</buffer>
					<buffer name="Adj">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="4" />
					</buffer>
					<buffer name="CellStart">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="5" />
					</buffer>
					<buffer name="CellEnd">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="6" />
					</buffer>
					<buffer name="Index">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="7" />
					</buffer>
									
			</buffers>
		</material>
		
		<material name="UpdateHash" 			>
		    <shader name="UpdateHash" 		>
		        <values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
					<valueof uniform="MASS" 			type="RENDERER" 		context="CURRENT" 		component="MASS" />
					<valueof uniform="RESTDENSITY" 		type="RENDERER" 		context="CURRENT" 		component="RESTDENSITY" />
					<valueof uniform="HASHSIZE" 		type="RENDERER" 		context="CURRENT" 		component="HASHSIZE" />
					<valueof uniform="PONTOS_LADO" 		type="RENDERER" 		context="CURRENT" 		component="PONTOS_LADO" />
					<valueof uniform="H" 		type="RENDERER" 		context="CURRENT" 		component="H" />
				</values>
		    </shader>
			<buffers>
					<buffer name="Position" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="0" />
					</buffer>
					<buffer name="Velocity" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="1" />
					</buffer>
					
					<buffer name="TempPosition">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="2" />
					</buffer>
					
					
					<!--AQUI -->
					<buffer name="TempVelocity" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="4" />
					</buffer>
					
					
						
		        </buffers>
		</material>
		<material name="RadixSort" 			>
		    <shader name="RadixSort" 		>
		        <values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
					<valueof uniform="MASS" 			type="RENDERER" 		context="CURRENT" 		component="MASS" />
					<valueof uniform="RESTDENSITY" 		type="RENDERER" 		context="CURRENT" 		component="RESTDENSITY" />
					<valueof uniform="HASHSIZE" 		type="RENDERER" 		context="CURRENT" 		component="HASHSIZE" />
					<valueof uniform="PONTOS_LADO" 		type="RENDERER" 		context="CURRENT" 		component="PONTOS_LADO" />
					<valueof uniform="H" 		type="RENDERER" 		context="CURRENT" 		component="H" />
				</values>
		    </shader>
			<buffers>
					
					<buffer name="Position" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="0" />
					</buffer>
					<buffer name="TempPosition" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="1" />
					</buffer>
					<buffer name="Index" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="2" />
					</buffer>
					<buffer name="CountRadix" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="3" />
					</buffer>
					<buffer name="TempIndex" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="4" />
					</buffer>
					<buffer name="UseTemp" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="5" />
					</buffer>

					
						
		        </buffers>
		</material>
		<material name="ComputeHistogram" 			>
		    <shader name="ComputeHistogram" 		>
		        <values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
					<valueof uniform="MASS" 			type="RENDERER" 		context="CURRENT" 		component="MASS" />
					<valueof uniform="RESTDENSITY" 		type="RENDERER" 		context="CURRENT" 		component="RESTDENSITY" />
					<valueof uniform="HASHSIZE" 		type="RENDERER" 		context="CURRENT" 		component="HASHSIZE" />
					<valueof uniform="PONTOS_LADO" 		type="RENDERER" 		context="CURRENT" 		component="PONTOS_LADO" />
					<valueof uniform="H" 		type="RENDERER" 		context="CURRENT" 		component="H" />
				</values>
		    </shader>
			<buffers>	
					<buffer name="Index" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="0" />
					</buffer>
					<buffer name="Histogram" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="1" />
					</buffer>
					<buffer name="Exp" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="2" />
					</buffer>
					<buffer name="UseTemp" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="3" />
					</buffer>
					<buffer name="TempIndex" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="4" />
					</buffer>

					
						
		        </buffers>
		</material>
		<material name="LocalPrefixSum" 			>
		    <shader name="LocalPrefixSum" 		>
		        <values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
					<valueof uniform="MASS" 			type="RENDERER" 		context="CURRENT" 		component="MASS" />
					<valueof uniform="RESTDENSITY" 		type="RENDERER" 		context="CURRENT" 		component="RESTDENSITY" />
					<valueof uniform="HASHSIZE" 		type="RENDERER" 		context="CURRENT" 		component="HASHSIZE" />
					<valueof uniform="PONTOS_LADO" 		type="RENDERER" 		context="CURRENT" 		component="PONTOS_LADO" />
					<valueof uniform="H" 		type="RENDERER" 		context="CURRENT" 		component="H" />
				</values>
		    </shader>
			<buffers>
					<buffer name="Histogram" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="0" />
					</buffer>
					<buffer name="PrefixSum" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="1" />
					</buffer>
					<buffer name="UseTemp" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="2" />
					</buffer>

					
						
		        </buffers>
		</material>
		<material name="GlobalPrefixSum" 			>
		    <shader name="GlobalPrefixSum" 		>
		        <values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
					<valueof uniform="MASS" 			type="RENDERER" 		context="CURRENT" 		component="MASS" />
					<valueof uniform="RESTDENSITY" 		type="RENDERER" 		context="CURRENT" 		component="RESTDENSITY" />
					<valueof uniform="HASHSIZE" 		type="RENDERER" 		context="CURRENT" 		component="HASHSIZE" />
					<valueof uniform="PONTOS_LADO" 		type="RENDERER" 		context="CURRENT" 		component="PONTOS_LADO" />
					<valueof uniform="H" 		type="RENDERER" 		context="CURRENT" 		component="H" />
				</values>
		    </shader>
			<buffers>
					
					<buffer name="Histogram" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="0" />
					</buffer>
					<buffer name="PrefixSum" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="1" />
					</buffer>
					<buffer name="UseTemp" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="2" />
					</buffer>

					
						
		        </buffers>
		</material>
		<material name="GlobalPrefixSumBack" 			>
		    <shader name="GlobalPrefixSumBack" 		>
		        <values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
					<valueof uniform="MASS" 			type="RENDERER" 		context="CURRENT" 		component="MASS" />
					<valueof uniform="RESTDENSITY" 		type="RENDERER" 		context="CURRENT" 		component="RESTDENSITY" />
					<valueof uniform="HASHSIZE" 		type="RENDERER" 		context="CURRENT" 		component="HASHSIZE" />
					<valueof uniform="PONTOS_LADO" 		type="RENDERER" 		context="CURRENT" 		component="PONTOS_LADO" />
					<valueof uniform="H" 		type="RENDERER" 		context="CURRENT" 		component="H" />
				</values>
		    </shader>
			<buffers>
					
					<buffer name="Histogram" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="0" />
					</buffer>
					<buffer name="PrefixSum" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="1" />
					</buffer>
					<buffer name="UseTemp" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="2" />
					</buffer>

					
						
		        </buffers>
		</material>
		<material name="CopyData" 			>
		    <shader name="CopyData" 		>
		        <values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
					<valueof uniform="MASS" 			type="RENDERER" 		context="CURRENT" 		component="MASS" />
					<valueof uniform="RESTDENSITY" 		type="RENDERER" 		context="CURRENT" 		component="RESTDENSITY" />
					<valueof uniform="HASHSIZE" 		type="RENDERER" 		context="CURRENT" 		component="HASHSIZE" />
					<valueof uniform="PONTOS_LADO" 		type="RENDERER" 		context="CURRENT" 		component="PONTOS_LADO" />
					<valueof uniform="H" 		type="RENDERER" 		context="CURRENT" 		component="H" />
				</values>
		    </shader>
			<buffers>

					
					<buffer name="Index" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="0" />
					</buffer>
					<buffer name="TempIndex" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="1" />
					</buffer>
					<buffer name="PrefixSum" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="2" />
					</buffer>
					<buffer name="Exp" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="3" />
					</buffer>
					<buffer name="UseTemp" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="4" />
					</buffer>
					<buffer name="CellStart" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="5" />
					</buffer>
					<buffer name="CellEnd" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="6" />
					</buffer>
					<buffer name="Position" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="7" />
					</buffer>
					<buffer name="TempPosition" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="8" />
					</buffer>
					<buffer name="Velocity" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="9" />
					</buffer>
					<buffer name="TempVelocity" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="10" />
					</buffer>

					
					
						
		        </buffers>
		</material>
		<material name="UpdateControlVariables" 			>
		    <shader name="UpdateControlVariables" 		>
		        <values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
					<valueof uniform="MASS" 			type="RENDERER" 		context="CURRENT" 		component="MASS" />
					<valueof uniform="RESTDENSITY" 		type="RENDERER" 		context="CURRENT" 		component="RESTDENSITY" />
					<valueof uniform="HASHSIZE" 		type="RENDERER" 		context="CURRENT" 		component="HASHSIZE" />
					<valueof uniform="PONTOS_LADO" 		type="RENDERER" 		context="CURRENT" 		component="PONTOS_LADO" />
					<valueof uniform="H" 		type="RENDERER" 		context="CURRENT" 		component="H" />
				</values>
		    </shader>
			<buffers>

					<buffer name="Exp" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="3" />
					</buffer>
					<buffer name="UseTemp" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="4" />
					</buffer>
					
					
						
		        </buffers>
		</material>
		<material name="ComputeStartEnd" 			>
		    <shader name="ComputeStartEnd" 		>
		        <values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
					<valueof uniform="MASS" 			type="RENDERER" 		context="CURRENT" 		component="MASS" />
					<valueof uniform="RESTDENSITY" 		type="RENDERER" 		context="CURRENT" 		component="RESTDENSITY" />
					<valueof uniform="HASHSIZE" 		type="RENDERER" 		context="CURRENT" 		component="HASHSIZE" />
					<valueof uniform="PONTOS_LADO" 		type="RENDERER" 		context="CURRENT" 		component="PONTOS_LADO" />
					<valueof uniform="H" 		type="RENDERER" 		context="CURRENT" 		component="H" />
				</values>
		    </shader>
			<buffers>

					<buffer name="Index" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="0" />
					</buffer>
					<buffer name="CellStart" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="1" />
					</buffer>
					<buffer name="CellEnd" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="2" />
					</buffer>
					
					
					
						
		        </buffers>
		</material>
		<material name="ClearStartEnd" 			>
		    <shader name="ClearStartEnd" 		>
		        <values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
					<valueof uniform="MASS" 			type="RENDERER" 		context="CURRENT" 		component="MASS" />
					<valueof uniform="RESTDENSITY" 		type="RENDERER" 		context="CURRENT" 		component="RESTDENSITY" />
					<valueof uniform="HASHSIZE" 		type="RENDERER" 		context="CURRENT" 		component="HASHSIZE" />
					<valueof uniform="PONTOS_LADO" 		type="RENDERER" 		context="CURRENT" 		component="PONTOS_LADO" />
					<valueof uniform="H" 		type="RENDERER" 		context="CURRENT" 		component="H" />
				</values>
		    </shader>
			<buffers>

					<buffer name="Index" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="0" />
					</buffer>
					<buffer name="CellStart" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="1" />
					</buffer>
					<buffer name="CellEnd" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="2" />
					</buffer>
					
					
					
						
		        </buffers>
		</material>
		<material name="ZeroBuffers" 			>
		    <shader name="ZeroBuffers" 		>
		        <values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
				</values>
		    </shader>
			<buffers>
					
					
						
		        </buffers>
		</material>
		<material name="ComputeOffsets" 			>
		    <shader name="ComputeOffsets" 		>
		        <values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
				</values>
		    </shader>
			<buffers>
					
					
					
						
		        </buffers>
		</material>
		<material name="ComputeTemps" 			>
		    <shader name="ComputeTemps" 		>
		        <values>
					<valueof uniform="m_model" 			type="RENDERER" 		context="CURRENT" 		component="MODEL" />
					<valueof uniform="Number_Particles" type="RENDERER" 		context="CURRENT" 		component="Number_Particles" />
					<valueof uniform="H" 				type="RENDERER" 		context="CURRENT" 		component="H" />
					<valueof uniform="HASHSIZE" 		type="RENDERER" 		context="CURRENT" 		component="HASHSIZE" />
				</values>
		    </shader>
			<buffers>
					<buffer name="Position" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="0" />
					</buffer>
					<buffer name="TempPosition">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="1" />
					</buffer>
					<buffer name="Velocity" >
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="2" />
					</buffer>
					<buffer name="TempVelocity">
						<TYPE value="SHADER_STORAGE" />
						<BINDING_POINT value="3" />
					</buffer>
					
						
		        </buffers>
		</material>
		<material name="MyNewSort">
			<buffers>
				<buffer name="Index" >
					<TYPE value="SHADER_STORAGE" />
					<BINDING_POINT value="0" />
				</buffer>
				<buffer name="TempIndex" >
					<TYPE value="SHADER_STORAGE" />
					<BINDING_POINT value="1" />
				</buffer>
				<buffer name="Position" >
					<TYPE value="SHADER_STORAGE" />
					<BINDING_POINT value="2" />
				</buffer>
				<buffer name="Velocity" >
					<TYPE value="SHADER_STORAGE" />
					<BINDING_POINT value="3" />
				</buffer>
			</buffers>
		</material>
	</materials>
</materialLib>